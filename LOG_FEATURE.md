# AI服务日志功能说明

## 功能概述
为Contexto扩展的AI服务添加了请求和响应的日志记录功能，方便开发者观察AI服务的请求过程。

## 主要特性

### 1. 开发模式检测
- 通过环境变量自动检测是否为开发模式
- 支持以下检测方式：
  - `NODE_ENV=development`
  - `VSCODE_DEBUG=true` 
  - `CONTEXTO_DEV=true`（专用标识）

### 2. 日志记录内容
- **翻译请求和响应**：记录每个语言的翻译请求prompt和AI返回的翻译结果
- **上下文分析请求和响应**：记录上下文分析的prompt和AI分析结果
- **时间戳**：每条日志包含精确的时间戳
- **分类标识**：不同类型的请求有明确的标识

### 3. 日志存储
- 日志文件路径：`{workspace}/contexto/log.txt`
- 自动创建contexto目录（如果不存在）
- 追加模式写入，不会覆盖已有日志

### 4. 命令支持
- `contexto.clearLog`：清空日志文件
- `contexto.toggleDevLog`：手动启用/禁用日志功能

## 使用方法

### 自动启用（推荐）
设置环境变量启用开发日志：
```bash
export CONTEXTO_DEV=true
```

### 手动启用
在VS Code中使用命令面板：
1. 按 `Cmd+Shift+P` (macOS) 或 `Ctrl+Shift+P` (Windows/Linux)
2. 输入 "切换开发日志"
3. 选择命令执行

### 查看日志
日志文件位置：`{你的项目根目录}/contexto/log.txt`

### 清空日志
使用命令面板执行 "清空日志" 命令

## 日志格式示例

```
=== TRANSLATION_REQUEST_EN [2025-08-27T10:30:45.123Z] ===
请将以下中文文本翻译成English，要求符合软件国际化标准...

1. 原文：登录
   业务场景：用户身份验证功能
   UI场景：登录按钮文本

====================================

=== TRANSLATION_RESPONSE_EN [2025-08-27T10:30:47.456Z] ===
1. Login
====================================

=== CONTEXT_ANALYSIS_REQUEST [2025-08-27T10:31:00.789Z] ===
请分析以下代码中文本的使用上下文...
====================================
```

## 注意事项
- 日志功能仅在开发模式下启用，生产环境不会产生日志
- 日志文件会随着使用逐渐增大，建议定期清理
- 日志内容可能包含敏感信息，请注意保护
